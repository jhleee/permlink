<h1>
  v17
</h1>

<input id="x" />
<pre id="y"></pre>

<script type="text/javascript">
  let lastTime = 0; // 마지막으로 요청을 보낸 시간을 추적합니다.

  document.querySelector("#x").addEventListener("change", (e) => {
    const now = new Date().getTime(); // 현재 시간을 가져옵니다.

    // 마지막 요청으로부터 0.5초 이상 지났는지 확인합니다.
    if (now - lastTime > 500) {
      fetch("/message", {
        method: "POST",
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: "message=" + encodeURIComponent(e.target.value)
      });
      document.querySelector("#y").textContent = e.target.value;

      lastTime = now; // 마지막 요청 시간을 업데이트합니다.
    }
  });
</script>
